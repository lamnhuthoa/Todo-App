{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nconst todoSlice = createSlice({\n  name: 'todoList',\n  initialState: {\n    status: 'idle',\n    todos: []\n  },\n  // [] => { status: '', todos: [] }\n  reducers: {\n    addTodo: (state, action) => {\n      // mutation || IMMER\n      state.push(action.payload);\n    },\n    toggleTodoStatus: (state, action) => {\n      const currentTodo = state.find(todo => todo.id === action.payload);\n\n      if (currentTodo) {\n        currentTodo.completed = !currentTodo.completed;\n      }\n    }\n  },\n\n  /* * * * * * * * * * * * * * * * * * * \r\n  *   => todos/fetchTodos/pending      *\r\n  *   => todos/fetchTodos/fulfilled    *\r\n  *   => todos/fetchTodos/rejected     *\r\n  * * * * * * * * * * * * * * * * * *  */\n  extraReducers: builder => {\n    builder.addCase(fetchTodos.pending, (state, action) => {\n      state.status = 'loading';\n    }).addCase(fetchTodos.fulfilled, (state, action) => {\n      state.todos = action.payload;\n      state.status = 'idle';\n    }).addCase(addNewTodo.fulfilled, (state, action) => {\n      state.todos.push(action.payload);\n      state.status = 'idle';\n    }).addCase(updateTodo.fulfilled, (state, action) => {\n      let currentTodo = state.todos.find(todo => todo.id === action.payload);\n      currentTodo = action.payload;\n    });\n  }\n}); //action (object) va action creator () => { return action }\n//thunk action (function) va thunk action creator () => { return thunk action }\n\nexport const fetchTodos = createAsyncThunk('todos/fetchTodos', async () => {\n  const res = await fetch(\"/api/todos\");\n  const data = await res.json();\n  return data.todos;\n});\nexport const addNewTodo = createAsyncThunk('todos/addNewTodo', async newTodo => {\n  const res = await fetch(\"/api/todos\", {\n    method: 'POST',\n    body: JSON.stringify(newTodo)\n  });\n  const data = await res.json();\n  return data.todos;\n});\nexport const updateTodo = createAsyncThunk('todos/updateTodo', async updatedTodo => {\n  const res = await fetch(\"/api/updateTodo\", {\n    method: 'POST',\n    body: JSON.stringify(updatedTodo)\n  });\n  const data = await res.json();\n  return data.todos;\n});\nexport default todoSlice;","map":{"version":3,"names":["createSlice","createAsyncThunk","todoSlice","name","initialState","status","todos","reducers","addTodo","state","action","push","payload","toggleTodoStatus","currentTodo","find","todo","id","completed","extraReducers","builder","addCase","fetchTodos","pending","fulfilled","addNewTodo","updateTodo","res","fetch","data","json","newTodo","method","body","JSON","stringify","updatedTodo"],"sources":["C:/Users/Admin/Desktop/todo-app/src/components/TodoList/todoListSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\nconst todoSlice = createSlice({\r\n    name: 'todoList',\r\n    initialState: { status: 'idle', todos: [] }, // [] => { status: '', todos: [] }\r\n    reducers: {\r\n        addTodo: (state, action) => {\r\n            // mutation || IMMER\r\n            state.push(action.payload)\r\n        },\r\n        toggleTodoStatus: (state, action) => {\r\n            const currentTodo = state.find(todo => todo.id === action.payload);\r\n            if (currentTodo) {\r\n                currentTodo.completed = !currentTodo.completed;\r\n            }\r\n        }\r\n    },\r\n    \r\n    /* * * * * * * * * * * * * * * * * * * \r\n    *   => todos/fetchTodos/pending      *\r\n    *   => todos/fetchTodos/fulfilled    *\r\n    *   => todos/fetchTodos/rejected     *\r\n    * * * * * * * * * * * * * * * * * *  */ \r\n\r\n    extraReducers: builder => {\r\n        builder\r\n            .addCase(fetchTodos.pending, (state, action) => {\r\n                state.status = 'loading';\r\n            })\r\n            .addCase(fetchTodos.fulfilled, (state, action) => {\r\n                state.todos = action.payload;\r\n                state.status = 'idle';\r\n            })\r\n            .addCase(addNewTodo.fulfilled, (state, action) => {\r\n                state.todos.push(action.payload);\r\n                state.status = 'idle';\r\n            })\r\n            .addCase(updateTodo.fulfilled, (state, action) => {\r\n                let currentTodo = state.todos.find((todo) => todo.id === action.payload);\r\n                currentTodo = action.payload;\r\n            })\r\n    }\r\n});\r\n\r\n//action (object) va action creator () => { return action }\r\n//thunk action (function) va thunk action creator () => { return thunk action }\r\n\r\nexport const fetchTodos = createAsyncThunk(\r\n    'todos/fetchTodos',\r\n    async () => {\r\n        const res = await fetch(\"/api/todos\");\r\n        const data = await res.json();\r\n        return data.todos;        \r\n    }\r\n)\r\n\r\nexport const addNewTodo = createAsyncThunk(\r\n    'todos/addNewTodo',\r\n    async (newTodo) => {\r\n        const res = await fetch(\"/api/todos\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(newTodo)\r\n        })\r\n        const data = await res.json();\r\n        return data.todos;\r\n    }\r\n)\r\n\r\nexport const updateTodo = createAsyncThunk(\r\n    'todos/updateTodo',\r\n    async (updatedTodo) => {\r\n        const res = await fetch(\"/api/updateTodo\", {\r\n            method: 'POST',\r\n            body: JSON.stringify(updatedTodo)\r\n        });\r\n\r\n        const data = await res.json();\r\n        return data.todos;\r\n    }\r\n) \r\n\r\nexport default todoSlice;"],"mappings":"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"},"metadata":{},"sourceType":"module"}